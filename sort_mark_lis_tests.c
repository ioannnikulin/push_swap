/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   sort_mark_lis_tests.c                              :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: inikulin <inikulin@student.42berlin.de>    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2024/01/20 17:27:18 by inikulin  yb        #+#    #+#             */
/*   Updated: 2024/03/09 18:27:22 by inikulin         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include <assert.h>
#include <stdio.h>
#include "sort_turk_internal.h"
#define START 0
#define SZ 3

typedef struct s_testcase {
	int	*a;
	int	asz;
	int	*exp;
	int	expsz;
}	t_testcase;

t_dlist	*mark_lis(t_dlist *a, int asz);

void	sort_mark_lis_tests()
{
	t_dlist *a;
	t_testcase t[SZ];
	t[0]=(t_testcase){(int[]){0,3,5,2,4,6},6,(int[]){0,2,4,6}, 4};
	t[1]=(t_testcase){(int[]){10,9,2,5,3,7,101,18},8,(int[]){2,3,7,9}, 4};
	t[2] = (t_testcase){(int[]){187, 1000, 651, 22, 892, 531, -881, -287, -489, 847, -567, 395, 661, 545, 934, 426, -609, -465, 722, -521, -842, 748, 194, 676, 744, 846, 552, -764, -217, -826, -1, 164, -121, 191, 54, -549, -951, -36, -657, -733, 72, -341, 871, -607, 534, 305, -830, -311, -828, -879, 874, 387, -935, -659, 286, -885, 858, 205, 759, 405, 149, -745, -537, 806, 801, 475, -993, 637, -515, -380, -471, 122, -291, -271, -54, -108, -18, 574, -837, -835, -330, 279, -338, -529, 516, 918, -547, -375, -595, 419, 428, 781, -70, 30, -710, -514, 515, 66, 861, 440, 326, -480, -240, 998, 7, -997, 37, 593, -642, -26, -3, 607, -136, -230, 639, -97, 756, -68, -524, 807, -796, -464, -89, 614, 210, 303, 678, 660, -80, 25, 510, -131, 58, 77, 928, -863, -203, -784, -708, -972, -973, 733, -98, 95, -723, 590, 285, -392, 875, 348, 523, -296, -47, 75, -156, 554, 28, 887, -284, 925, 878, -994, -562, -581, -747, 259, 126, -355, 505, 999, 55, -196, 357, -640, -249, -357, -286, -897, -780, 50, 390, -507, -724, 547, -683, -168, 834, 658, -301, -597, -999, -527, -769, -522, 905, -568, -343, -856, 812, 403, 455, -257, -967, 160, 466, 888, -689, 417, 973, 996, 908, -452, 125, -913, -75, 250, -572, -492, -762, 566, 220, -963, -896, -890, -957, 926, 494, 39, -144, 902, 240, 434, -366, -891, 577, -847, 115, -704, -475, 777, 588, 549, 369, 404, 415, -438, 342, 691, -115, -713, 414, 308, 864, 609, -234, -865, -530, -819, -715, 615, 512, -170, 507, 32, -532, -744, -459, 218, 580, -171, 290, -329, -806, 865, 255, 519, 408, -741, 561, 56, -726, -626, -316, 254, -5, 65, -188, -180, 82, 517, 331, 474, -758, -798, 851, -398, 813, -362, 725, 213, 80, 293, 612, -29, 648, 941, 190, -593, 500, 47, -215, 766, -430, 602, 269, -408, -482, 289, -645, -852, -550, -360, -998, 288, -403, -812, -456, 495, 438, 165, -770, -559, 294, 379, 988, 168, 112, 350, 116, -665, 423, 431, 541, 35, 584, 488, -541, 197, 447, 134, -706, 451, 101, 882, -22, -922, -443, 792, 207, 730, 727, 837, -779, -232, 309, -525, -300, -483, -395, 699, 810, 564, -1000, -413, 679, -807, 454, 490, 497, 15, -440, -213, 146, -281, 819, 383, -389, 654, 435, 539, 469, -372, -936, -932, -198, -337, -768, -716, 388, 442, 19, -225, -548, -91, -323, -320, -861, -754, -377, -169, 738, 971, -28, -485, -766, 712, 108, 441, 381, -838, -591, -577, -698, -33, 485, -923, 334, 143, 406, -520, 721, -344, 152, 153, -694, 140, 982, -193, -511, -633, 915, -614, 965, 260, 93, 68, -892, 884, -774, -771, -916, 592, 863, -526, -285, 967, 118, 778, -497, 206, 73, -274, 225, -247, -229, 429, 949, -912, -191, 508, -786, 596, -259, -339, -728, -817, 879, -126, -132, -960, -299, 979, -560, 374, 942, -283, -725, -919, -466, -751, 359, 832, -669, 581, -543, -382, 339, 295, 411, -740}, 500, (int[]){-1000, -936, -932, -923, -916, -912, -786, -728, -725, -669, -657, -607, -537, -515, -471, -291, -271, -240, -230, -97, -89, -80, 25, 58, 77, 95, 285, 348, 357, 390, 403, 455, 466, 494, 507, 519, 561, 612, 648, 766, 792, 810}, 42};
	printf("Starting %d longest increasing subsequence search tests tests.\n", SZ - START);
	for (int i = START; i < SZ; i ++) {
		if ((CUR_DEBUG & OP_TEST_BORDER) > 0)
			printf("\n################################################################\n\n");
		if ((CUR_DEBUG & OP_TEST_NUMBERS) > 0)
			printf("test #%i\n", i);
		a = ft_dlist_generate_int(t[i].a, t[i].asz, 0);
		t_dlist *res = mark_lis(a, t[i].asz);
		if ((CUR_DEBUG & OP_TEST_FULLDETAILS) > 0) {
			printf("SOURCE:\n");
			assert(print(a, 0, iprinter) == 0);
		}
		for (int j = 0; j < t[i].expsz; j ++) {
			assert(res);
			assert((int)(intptr_t)(res->content) == t[i].exp[j]);
			assert(res->lisl == t[i].expsz - j);
			res = res->lisn;
		}
		ft_dlist_clear(&a, 0, 0);
	}
	printf("SUCCESS: all operations performed as predicted\n");
}
